(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{35:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(20),s=n.n(a),o=(n(35),n(3)),i=n(13),l=n(5),u=n(2),d=n.n(u),b=n(4),p=n(12),j=n(7),f=n(8),h=n.n(f),m="https://posts-pw2021.herokuapp.com/api/v1",x={};x.login=function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.post("".concat(m,"/auth/signin"),{username:t,password:n}).then((function(e){return console.log(e.data),e.data})).catch((function(e){return e.response.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x.verifyToken=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.get("".concat(m,"/auth/whoami"),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.data})).catch((function(e){return e.response.data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x.getPosts=function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.get("".concat(m,"/post/all?limit=9&page=").concat(n),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.data})).catch((function(e){return e.response.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x.likePost=function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.patch("".concat(m,"/post/like/").concat(n),{},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.data})).catch((function(e){return e.response.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x.favoritePost=function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.patch("".concat(m,"/post/fav/").concat(n),{},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.data})).catch((function(e){return e.response.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x.createPost=function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.post("".concat(m,"/post/create"),n,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return window.location.reload(),e.data})).catch((function(e){return e.response.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x.updatePost=function(){var e=Object(b.a)(d.a.mark((function e(t,n,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.put("".concat(m,"/post/update/").concat(n),r,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return window.location.reload(),e.data})).catch((function(e){return e.response.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),x.getFavPosts=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.get("".concat(m,"/post/fav"),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.data})).catch((function(e){return e.response.data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x.getOwned=function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.get("".concat(m,"/post/owned?limit=9&page=").concat(n),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.data})).catch((function(e){return e.response.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x.toggleActive=function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.patch("".concat(m,"/post/toggle/").concat(n),{},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.data})).catch((function(e){return e.response.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x.getPost=function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.get("".concat(m,"/post/one/").concat(n),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.data})).catch((function(e){return e.response.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x.addComment=function(){var e=Object(b.a)(d.a.mark((function e(t,n,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.a.patch("".concat(m,"/post/comment/").concat(n),r,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.data})).catch((function(e){return e.response.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();var O=x,g=n(6),v=(n(19),n(1)),w=function(e){var t=e.setToken,n=e.setType,c=Object(r.useState)({username:"",password:""}),a=Object(o.a)(c,2),s=a[0],i=a[1],l=function(e){var t=e.target,n=t.name,r=t.value;i(Object(j.a)(Object(j.a)({},s),{},Object(p.a)({},n,r)))},u=function(){var e=Object(b.a)(d.a.mark((function e(r){var c,a,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),c=s.username,a=s.password,""!==c&&""!==a){e.next=7;break}g.b.error("Please enter your username and password",{position:"top-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.next=15;break;case 7:return e.next=9,O.login(c,a);case 9:o=e.sent,localStorage.setItem("token",o.token),localStorage.setItem("type",o.role),t(o.token),n(o.role),o.error&&(localStorage.removeItem("token"),localStorage.removeItem("type"),g.b.error(o.error,{position:"top-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),i({username:"",password:""}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("form",{className:"text-white flex flex-col justify-center items-center h-screen m-auto",children:[Object(v.jsx)(g.a,{position:"top-left",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(v.jsxs)("div",{className:"outline-white flex flex-col justify-center items-center rounded-xl sm:w-1/2 h-80 lg:w-1/3 xl:w-1/4",children:[Object(v.jsxs)("div",{className:"m-4",children:[Object(v.jsx)("label",{htmlFor:"username",className:"block space-y-2 my-3 text-xl font-bold",children:"Username"}),Object(v.jsx)("input",{type:"text",name:"username",placeholder:"e.g username123",className:"text-black rounded-md p-0.5 pl-2 text-lg",onChange:l,value:s.username})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{htmlFor:"password",className:"block space-y-2 my-3 text-xl font-bold",children:"Password"}),Object(v.jsx)("input",{type:"password",name:"password",placeholder:"*********",className:"text-black border-none rounded-md p-0.5 pl-2 text-lg",onChange:l,value:s.password})]}),Object(v.jsx)("button",{type:"submit",className:"bg-red-700 text-white font-bold py-2 px-4 rounded-xl w-1/4 mt-6 mb-6 shadow-xl hover:bg-red-900",onClick:u,children:"Login"})]})]})},k=function(e){var t=e.setToken,n=e.setType;return Object(v.jsxs)(l.d,{children:[Object(v.jsx)(l.b,{path:"/auth/login",element:Object(v.jsx)(w,{setToken:t,setType:n})}),Object(v.jsx)(l.b,{path:"*",element:Object(v.jsx)(l.a,{to:"/auth/login"})})]})},y=function(e){var t=e.children,n=e.onClick;return Object(v.jsx)("button",{className:"flex font-bold text-black rounded-full shadow-xl m-auto",onClick:n,children:t})},N=n(14),C=function(e){var t=e.show,n=e.onClose,c=e.title,a=e.children,s=function(e){27===(e.charCode||e.keyCode)&&n()};return Object(r.useEffect)((function(){return document.body.addEventListener("keydown",s),function(){document.body.removeEventListener("keydown",s)}}),[]),t?Object(v.jsx)("div",{className:"modal fixed left-0 top-0 right-0 bottom-0 flex items-center justify-center bg-white bg-opacity-25",onClick:n,children:Object(v.jsxs)("div",{className:"editor mx-auto w-10/12 flex flex-col text-gray-800 border border-gray-300 p-4 shadow-lg max-w-2xl w-1/2 bg-white",onClick:function(e){return e.stopPropagation()},children:[Object(v.jsx)("div",{className:"modal-header p-2",children:Object(v.jsx)("h4",{className:"text-2xl font-bold mb-4 modal-title ",children:c})}),Object(v.jsx)("div",{className:"modal-body p-2",children:a}),Object(v.jsx)("div",{className:"modal-footer p-2 flex justify-end",children:Object(v.jsx)("div",{children:Object(v.jsx)("button",{onClick:n,className:"btn border border-gray-300 p-1 px-4 font-semibold cursor-pointer text-gray-500 ml-auto",children:"Close"})})})]})}):null},S=n(21),P=function(e){var t=e.postID,n=e.handlePost,c=e.onClose,a=e.type,s=Object(r.useState)({title:"",description:"",image:""}),i=Object(o.a)(s,2),l=i[0],u=i[1];Object(r.useEffect)((function(){O.getPost(localStorage.getItem("token"),t).then((function(e){u({title:e.title,description:e.description,image:e.image})}))}),[t]);var d=Object(S.a)({defaultValues:Object(j.a)({},l)}),b=d.register,p=d.handleSubmit,f=d.formState.errors,h=d.setValue;Object(r.useEffect)((function(){l&&(h("title",l.title),h("description",l.description),h("image",l.image))}),[l]);return Object(v.jsxs)("form",{onSubmit:p((function(e){"create"===a?n(e):n(t,e),c()})),children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{children:Object(v.jsx)("label",{htmlFor:"title",className:"font-semibold",children:"Title"})}),Object(v.jsx)("div",{children:Object(v.jsx)("input",Object(j.a)(Object(j.a)({type:"text",name:"title",placeholder:"Type your post's title",defaultValue:""},b("title",{required:!0})),{},{className:"w-full title bg-gray-100 border border-gray-300 p-2 mb-4 outline-none"}))})]}),f.title&&Object(v.jsx)("span",{children:"This field is required"}),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{children:Object(v.jsx)("label",{htmlFor:"description",className:"font-semibold",children:"Description"})}),Object(v.jsx)("div",{children:Object(v.jsx)("textarea",Object(j.a)(Object(j.a)({name:"description",placeholder:"Write your post's description.",defaultValue:""},b("description",{required:!0})),{},{className:"w-full description bg-gray-100 sec p-3 h-55 border border-gray-300 outline-none"}))})]}),f.description&&Object(v.jsx)("span",{children:"This field is required"}),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{children:Object(v.jsx)("label",{htmlFor:"image",className:"font-semibold",children:"Image"})}),Object(v.jsx)("div",{children:Object(v.jsx)("input",Object(j.a)(Object(j.a)({type:"text",name:"image",placeholder:"Paste the URL of your post's image",defaultValue:""},b("image",{required:!0})),{},{className:"w-full title bg-gray-100 border border-gray-300 p-2 mb-4 outline-none"}))})]}),f.image&&Object(v.jsx)("span",{children:"This field is required"}),Object(v.jsx)("input",{type:"submit",className:"btn border border-yellow-500 p-1 px-4 font-semibold cursor-pointer text-gray-200 ml-2 bg-yellow-500"})]})},T=function(e){var t=e.showComments,n=e.handleComment,r=Object(S.a)(),c=r.register,a=r.handleSubmit;return Object(v.jsx)("form",{onSubmit:a((function(e,t){n(e),t.target.reset()})),children:Object(v.jsxs)("div",{className:"flex space-x-2 justify-center items-center",children:[Object(v.jsx)("input",Object(j.a)(Object(j.a)({name:"description",type:"text",placeholder:"Add a comment",defaultValue:""},c("description",{required:!0})),{},{className:"text-black rounded-md mt-2 mb-2 p-0.5 pl-2 text-lg border-2 border-black w-72"})),Object(v.jsx)(y,{type:"submit",onClick:t,children:Object(v.jsx)(N.a,{className:"h-8 w-8"})})]})})},I=function(e){var t=e.user,n=e.description;return Object(v.jsx)("div",{class:"cursor-pointer w-full border-gray-100 rounded-t border-b hover:bg-teal-100",children:Object(v.jsxs)("div",{class:"flex w-full items-center p-2 pl-2 border-transparent border-l-2 relative hover:border-teal-100",children:[Object(v.jsx)("div",{class:"w-6 flex flex-col items-center",children:Object(v.jsx)("div",{class:"flex relative w-5 h-5 bg-orange-500 justify-center items-center m-1 mr-2 w-4 h-4 mt-1 rounded-full ",children:" "})}),Object(v.jsx)("div",{class:"w-full items-center flex",children:Object(v.jsxs)("div",{class:"mx-2 text-red-600 font-semibold",children:["".concat(t.username),Object(v.jsx)("div",{class:"text-xs break-words w-full normal-case font-normal mt-1 text-gray-500 text-left",children:"".concat(n)})]})})]})})},F=function(e){var t=e.comments;return Object(v.jsx)("div",{className:"flex flex-col items-center rounded-sm my-2 pr-4 max-h-80 overflow-y-auto",children:t.map((function(e){return Object(v.jsx)(I,{description:e.description,user:e.user})}))})},B=function(e){var t=e.updatePost,n=e.id,c=e.username,a=e.title,s=e.description,i=e.image,l=e.likes,u=e.active,p=e.commentsLength,j=e.setFlag,f=e.isFavorite,h=e.setFavFlag,m=localStorage.getItem("token"),x=Object(r.useState)(""),w=Object(o.a)(x,2),k=w[0],S=w[1],I=Object(r.useState)(!1),B=Object(o.a)(I,2),E=B[0],A=B[1],H=Object(r.useState)(!1),z=Object(o.a)(H,2),L=z[0],V=z[1],q=Object(r.useState)([]),_=Object(o.a)(q,2),D=_[0],M=_[1];O.verifyToken(m).then((function(e){S(e.username)})),Object(r.useEffect)((function(){O.getPost(localStorage.getItem("token"),n).then((function(e){M(e.comments)}))}),[n]);var Y=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{O.getPost(localStorage.getItem("token"),n).then((function(e){M(e.comments),j((function(e){return!e}))}))}catch(t){alert("Error."),window.scrollTo(0,0)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),V(!0),e.next=4,O.getPost(localStorage.getItem("token"),n);case 4:t=e.sent,console.log(t.comments);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.description.length>=8)){e.next=7;break}return e.next=3,O.addComment(localStorage.getItem("token"),n,t);case 3:r=e.sent,console.log(r),e.next=8;break;case 7:t.description.length>0&&g.b.error("Comments must have at least 8 characters",{position:"top-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});case 8:Y(),J();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){O.toggleActive(m,n).then((function(e){return j((function(e){return!e}))}))},G=function(){return u?Object(v.jsx)(y,{onClick:W,children:Object(v.jsx)(N.b,{className:"h-7 w-7 text-gray-600 hover:text-gray-600"})}):Object(v.jsx)(y,{onClick:W,children:Object(v.jsx)(N.b,{className:"h-7 w-7 text-red-600 hover:text-red-600"})})};return Object(v.jsx)("div",{className:"bg-white w-96 h-auto rounded-lg m-0.5 flex flex-col space-x-2 items-center pb-2 ml-6 mb-6",children:Object(v.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[Object(v.jsxs)(C,{onClose:function(){return V(!1)},show:L,title:"Comments",children:[Object(v.jsx)(g.a,{position:"top-left",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(v.jsx)(F,{comments:D})]}),Object(v.jsx)("h3",{className:"flex justify-start font-bold text-xl pt-4 pb-2",children:a}),Object(v.jsxs)("p",{className:"text-md pl-6 pr-4 text-left ",children:[" ",Object(v.jsxs)("span",{className:"font-semibold text-red-600",children:["@",c,":"]})," ",Object(v.jsx)("span",{className:"break-all",children:s})]}),Object(v.jsx)("div",{children:"https://posts-pw2021.herokuapp.com/api/v1/post/create"===i?void 0:Object(v.jsx)("img",{className:"w-max pl-6 pr-6 mt-4",src:i,alt:"A visual content that describe the post"})}),Object(v.jsxs)("div",{className:"flex space-x-16 mt-4 mb-2",children:[Object(v.jsxs)(y,{onClick:function(){O.likePost(m,n).then((function(e){return j((function(e){return!e}))}))},children:[l.some((function(e){return e.username===k}))?Object(v.jsx)(N.c,{className:"h-7 w-7 text-red-600 hover:text-red-600"}):Object(v.jsx)(N.c,{className:"h-7 w-7 text-gray-600 hover:text-gray-600"}),Object(v.jsxs)("span",{className:"px-2 m-auto",children:[" ",l.length," "]})]}),Object(v.jsx)(y,{onClick:function(){O.favoritePost(m,n).then((function(e){h((function(e){return!e}))}))},children:f?Object(v.jsx)(N.e,{className:"h-7 w-7 text-yellow-600 hover:text-yellow-600"}):Object(v.jsx)(N.e,{className:"h-7 w-7 text-gray-600 hover:text-gray-600"})}),function(){if(k===c)return Object(v.jsxs)("div",{children:[Object(v.jsx)(C,{onClose:function(){return A(!1)},show:E,title:"Edit Post",children:Object(v.jsx)(P,{handlePost:t,postID:n,onClose:function(){A(!1)},type:"edit"})}),Object(v.jsxs)("div",{className:"flex space-x-16",children:[Object(v.jsxs)(y,{onClick:function(){return A(!0)},children:[" ",Object(v.jsx)(N.d,{className:"h-7 w-7 hover:text-blue-600"})," "]}),Object(v.jsxs)(y,{onClick:W,children:[" ",G()," "]})]})]})}()]}),Object(v.jsx)(T,{handleComment:U,showComments:J}),Object(v.jsxs)("span",{className:"text-sm text-black font-semibold",children:[" ",p," comments"," "]})]})})},E=function(e){var t=e.updatePost,n=e.cards,c=e.setFlag,a=Object(r.useState)([]),s=Object(o.a)(a,2),i=s[0],l=s[1],u=Object(r.useState)(!1),d=Object(o.a)(u,2),b=d[0],p=d[1];return Object(r.useEffect)((function(){O.getFavPosts(localStorage.getItem("token")).then((function(e){l(e.favorites)}))}),[b,p]),Object(v.jsx)("div",{className:"flex flex-col justify-center justify-items-stretch items-center my-1 rounded-sm m-auto",children:n.map((function(e){return Object(v.jsx)(B,{updatePost:t,id:e._id,username:e.user.username,title:e.title,description:e.description,image:e.image,setFlag:c,likes:e.likes,active:e.active,commentsLength:e.comments.length,isFavorite:i.includes(e._id),setFavFlag:p})}))})},A=function(e){var t=e.content,n=e.onClick;return Object(v.jsx)("button",{className:"bg-red-700 font-semibold text-white p-2 rounded-xl mb-6 hover:bg-red-900",onClick:n,children:t})},H=function(e){var t=e.onClick;return Object(v.jsx)("button",{className:"bg-green-700 font-semibold text-white p-2 rounded-xl mb-6 hover:bg-green-900",onClick:t,children:"Logout"})},z=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),s=Object(o.a)(a,2),l=s[0],u=s[1],p=Object(r.useState)(0),j=Object(o.a)(p,2),f=j[0],h=j[1],m=Object(r.useState)(!1),x=Object(o.a)(m,2),w=x[0],k=x[1],y=Object(r.useState)(""),N=Object(o.a)(y,2),S=N[0],T=N[1],I=Object(r.useState)(""),F=Object(o.a)(I,2),B=F[0],z=F[1];O.verifyToken(localStorage.getItem("token")).then((function(e){z(e.username)})),O.verifyToken(localStorage.getItem("token")).then((function(e){T(e.role)})),Object(r.useEffect)((function(){O.getPosts(localStorage.getItem("token"),0).then((function(e){u(e.data)}))}),[n]);var L=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.getPosts(localStorage.getItem("token"),f+1);case 3:t=e.sent,u(t.data),h(f+1),window.scrollTo(0,0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),g.b.error("No more posts to load",{position:"top-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),window.scrollTo(0,0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.updatePost(localStorage.getItem("token"),t,n);case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),alert("Error. Something Ocurred"),window.scrollTo(0,0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.createPost(localStorage.getItem("token"),t);case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),Object(g.b)("Error. Something Ocurred"),window.scrollTo(0,0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(f>0)){e.next=10;break}return e.next=4,O.getPosts(localStorage.getItem("token"),f-1);case 4:t=e.sent,u(t.data),h(f-1),window.scrollTo(0,0),e.next=12;break;case 10:g.b.error("You're at the beginning",{position:"top-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),window.scrollTo(0,0);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Error");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[Object(v.jsx)(g.a,{position:"top-left",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(v.jsx)("div",{className:"flex justify-end mx-6 mt-4",children:Object(v.jsx)(H,{onClick:function(){localStorage.removeItem("token"),localStorage.removeItem("type"),window.location.reload()}})}),Object(v.jsxs)("div",{className:"flex flex-col justify-center items-center ml-2",children:[Object(v.jsx)("h2",{className:"text-white font-black text-3xl",children:"Social Media"}),Object(v.jsxs)("h3",{className:"text-white mt-2 mb-6",children:[" ","Welcome, ",Object(v.jsxs)("span",{className:"font-semibold text-blue-300",children:["@",B]})]}),Object(v.jsxs)("div",{className:"space-x-4 flex justify-center items-center",children:[function(){if("admin"===S)return Object(v.jsxs)("div",{className:"space-x-4 ml-2",children:[Object(v.jsx)(A,{onClick:function(){return k(!0)},content:"Create Post"}),Object(v.jsx)(i.b,{to:"/my_post",children:Object(v.jsx)(A,{content:"View my posts"})})]})}(),Object(v.jsx)(C,{onClose:function(){return k(!1)},show:w,title:"Make a Post",children:Object(v.jsx)(P,{handlePost:q,onClose:function(){k(!1)},type:"create"})}),Object(v.jsx)(i.b,{to:"/favorites",children:Object(v.jsx)(A,{content:"View favorites"})})]})]}),Object(v.jsx)(E,{updatePost:V,cards:l,setFlag:c}),Object(v.jsxs)("div",{className:"flex justify-center items-center space-x-4",children:[Object(v.jsx)(A,{content:"Previous Page",onClick:_}),Object(v.jsx)(A,{content:"Next Page",onClick:L})]})]})},L=function(){return Object(v.jsx)("form",{className:"text-white flex flex-col justify-center items-center h-screen m-auto",children:Object(v.jsxs)("div",{className:"outline-white flex flex-col justify-center items-center rounded-xl sm:w-1/2 h-auto lg:w-1/3 xl:w-1/4",children:[Object(v.jsxs)("div",{className:"m-4",children:[Object(v.jsx)("label",{htmlFor:"title",className:"block space-y-2 my-3 text-xl font-bold",children:"Title"}),Object(v.jsx)("input",{id:"create-title",type:"text",placeholder:"e.g This is a post",className:"text-black rounded-md p-0.5 pl-2 text-lg"})]}),Object(v.jsxs)("div",{className:"mb-2",children:[Object(v.jsx)("label",{htmlFor:"description",className:"block space-y-2 my-3 text-xl font-bold",children:"Description"}),Object(v.jsx)("textarea",{id:"create-description",type:"text",placeholder:"e.g You can write the description of your post here",className:"resize-none w-52 h-32 text-black rounded-md p-0.5 pl-2"})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{htmlFor:"image",className:"block space-y-2 my-3 text-xl font-bold",children:"Image url"}),Object(v.jsx)("input",{id:"create-image",type:"text",placeholder:"www.page.com/image",className:"text-black border-none rounded-md p-0.5 pl-2 text-lg"})]}),Object(v.jsx)("button",{type:"submit",resize:!0,className:"bg-red-700 text-white font-bold py-2 px-4 rounded-xl w-1/4 mt-6 mb-6 shadow-xl hover:bg-red-900",children:"Create!"})]})})},V=n(11),q=function(e){var t=e.onClick;return Object(v.jsx)("button",{className:"bg-blue-700 font-semibold text-white p-2 rounded-xl mb-6 hover:bg-blue-900",onClick:t,children:"Go Home"})},_=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),s=Object(o.a)(a,2),i=s[0],u=s[1],p=Object(l.g)();Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,r,a,s,o,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=Object(V.a)(t),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=19;break}return s=a.value,e.prev=6,e.next=9,O.getPost(localStorage.getItem("token"),s);case 9:o=e.sent,n.push(o),n.length===t.length&&(i=n.filter((function(e){return e._id})),c(i.reverse())),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0);case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(2),r.e(e.t1);case 24:return e.prev=24,r.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[2,21,24,27],[6,14]])})));return function(t){return e.apply(this,arguments)}}();O.getFavPosts(localStorage.getItem("token")).then((function(t){e(t.favorites)}))}),[i,n]);return Object(v.jsxs)("div",{children:[Object(v.jsx)("h1",{className:"text-white font-bold text-3xl text-center mt-12 mb-6",children:"Favorite Post"}),Object(v.jsx)("div",{className:"flex justify-center items-center",children:Object(v.jsx)(q,{onClick:function(){p("/main")}})}),Object(v.jsx)(E,{cards:n,setFlag:u})]})},D=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),s=Object(o.a)(a,2),i=s[0],u=s[1],p=Object(r.useState)(0),j=Object(o.a)(p,2),f=j[0],h=j[1],m=Object(l.g)(),x=function(){var e=Object(b.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.updatePost(localStorage.getItem("token"),t,n);case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),g.b.error("Error. Something Ocurred",{position:"top-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),window.scrollTo(0,0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){O.getOwned(localStorage.getItem("token"),0).then((function(e){u(e.data)}))}),[n]);var w=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(f<i.length-1)){e.next=10;break}return e.next=4,O.getOwned(localStorage.getItem("token"),f+1);case 4:t=e.sent,u(t.data),h(f+1),window.scrollTo(0,0),e.next=12;break;case 10:g.b.error("No more posts to load",{position:"top-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),window.scrollTo(0,0);case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),g.b.error("No more posts to load",{position:"top-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),window.scrollTo(0,0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(f>0)){e.next=10;break}return e.next=4,O.getOwned(localStorage.getItem("token"),f-1);case 4:t=e.sent,u(t.data),h(f-1),window.scrollTo(0,0),e.next=12;break;case 10:g.b.error("You're at the beginning",{position:"top-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),window.scrollTo(0,0);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Error");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[Object(v.jsx)(g.a,{position:"top-left",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),Object(v.jsx)("h1",{className:"text-4xl font-bold text-center text-white my-8",children:"My Posts"}),Object(v.jsx)(q,{onClick:function(){m("/main")}}),Object(v.jsx)(E,{updatePost:x,cards:i,setFlag:c}),Object(v.jsxs)("div",{className:"space-x-4",children:[Object(v.jsx)(A,{content:"Previous Page",onClick:k}),Object(v.jsx)(A,{content:"Next Page",onClick:w})]})]})},M=function(){return Object(v.jsxs)(l.d,{children:[Object(v.jsx)(l.b,{path:"/home",element:Object(v.jsx)(z,{})}),Object(v.jsx)(l.b,{path:"/create_post",element:Object(v.jsx)(L,{})}),Object(v.jsx)(l.b,{path:"/favorites",element:Object(v.jsx)(_,{})}),Object(v.jsx)(l.b,{path:"/my_post",element:Object(v.jsx)(D,{})}),Object(v.jsx)(l.b,{path:"*",element:Object(v.jsx)(l.a,{to:"/home"})})]})},Y=function(){return Object(v.jsxs)(l.d,{children:[Object(v.jsx)(l.b,{path:"/home",element:Object(v.jsx)(z,{})}),Object(v.jsx)(l.b,{path:"/favorites",element:Object(v.jsx)(_,{})}),Object(v.jsx)(l.b,{path:"*",element:Object(v.jsx)(l.a,{to:"/home"})})]})},J=function(){var e=Object(r.useState)(localStorage.getItem("token")||null),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(localStorage.getItem("type")||null),s=Object(o.a)(a,2),l=s[0],u=s[1];return Object(v.jsxs)(i.a,{children:["admin"===l&&Object(v.jsx)(M,{}),"user"===l&&Object(v.jsx)(Y,{}),!n&&Object(v.jsx)(k,{setToken:c,setType:u})]})};s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(J,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.08ca040e.chunk.js.map